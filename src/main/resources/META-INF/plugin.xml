<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>com.euver.kiwin</id>
    <name>Kiwin</name>
    <vendor>Helchan</vendor>

    <description><![CDATA[
    Kiwin is a powerful IntelliJ IDEA plugin designed for Spring and MyBatis project development.
    It provides essential tools for analyzing and enhancing development efficiency.

    <h3>Key Features:</h3>
    <ul>
        <li><b>Copy Expanded Statement</b> - Assemble MyBatis SQL statements with automatic include tag expansion, supporting nested references up to 10 levels and cross-file fragment resolution.</li>
        <li><b>Extract Method Information</b> - Extract Java method details including HTTP request type, request path, fully qualified name, and functional comments for Spring MVC and JAX-RS annotations.</li>
        <li><b>Get Top Callers Information</b> - Analyze call chains to find all top-level callers (API entry points) for Java methods, MyBatis Statements, or SQL fragments with TreeTable visualization and Excel export.</li>
    </ul>

    <h3>Highlights:</h3>
    <ul>
        <li>DDD (Domain-Driven Design) architecture for clean code organization</li>
        <li>BFS algorithm for efficient call chain traversal with 50-level depth limit</li>
        <li>Lambda and method reference call tracing support</li>
        <li>Automatic circular reference detection</li>
        <li>Background async execution without blocking IDE</li>
    </ul>
    ]]></description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.xml</depends>
    <depends>com.intellij.modules.java</depends>


    <extensions defaultExtensionNs="com.intellij">
        <toolWindow factoryClass="com.euver.kiwin.service.MyBatisSqlToolWindowFactory" id="Kiwin Console" anchor="bottom" canCloseContents="true" icon="AllIcons.Debugger.Console"/>
        <!-- MyBatis SQL Assembly Service -->
        <projectService serviceImplementation="com.euver.kiwin.service.MapperIndexService"/>
        <!-- Notification Group for MyBatis SQL Assembly -->
        <notificationGroup id="MyBatis.SQL.Assembly" displayType="BALLOON"/>
    </extensions>

    <actions>
        <!-- MyBatis SQL Assembly Action -->
        <group id="Kiwin.EditorPopupGroup"
               text="Kiwin"
               popup="true">
            <add-to-group group-id="EditorPopupMenu" anchor="first"/>
            <action id="Kiwin.ExtractMethodInfo"
                    class="com.euver.kiwin.action.ExtractMethodInfoAction"
                    text="Extract Method Information"
                    description="提取方法的全限定名、功能注释和请求路径并输出到控制台"
                    icon="/icons/kiwin.svg"/>
            <action id="Kiwin.AssembleSql"
                    class="com.euver.kiwin.action.AssembleSqlAction"
                    text="Copy Expanded Statement"
                    description="Copy the statement with all include tags expanded"
                    icon="/icons/kiwin.svg"/>
            <action id="Kiwin.FindTopCaller"
                    class="com.euver.kiwin.action.FindTopCallerAction"
                    text="Get Top Callers Information"
                    description="获取并输出所有顶层调用者的方法信息"
                    icon="/icons/kiwin.svg"/>
        </group>
    </actions>
</idea-plugin>
